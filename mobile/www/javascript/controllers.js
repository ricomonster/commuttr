CommuttrApp.controller("SplashPageController",["$ionicViewSwitcher","$location","$scope","$state",function(o,e,t,n){t.search={},t.doSearch=function(){o.nextDirection("forward"),n.go("route.search",{keyword:t.search.query})}}]),CommuttrApp.controller("RouteSearchController",["$ionicLoading","$scope","$stateParams","RouteService",function(o,e,t,n){e.results={},e.search={},o.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0});var a=function(t){e.keyword=t,n.search(e.keyword).success(function(t){t.data&&(e.results=t.data.results,o.hide())}).error(function(){})};e.doSearch=function(){o.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0}),a(e.search.keyword)},a(t.keyword)}]),CommuttrApp.controller("RouteViewController",["$ionicLoading","$scope","$stateParams","$window","RouteService",function(o,e,t,n,a){e.route={},o.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0});var r=function(){i(function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(s)})},i=function(o){var n=t.routeId;a.get(n).success(function(t){t.data&&(e.route=t.data.route,o())})},s=function(t){for(var n={center:new google.maps.LatLng(t.coords.latitude,t.coords.longitude),zoom:4,mapTypeId:google.maps.MapTypeId.ROADMAP},a=new google.maps.Map(document.getElementById("map_canvas"),n),r=(new google.maps.InfoWindow,[]),i=new google.maps.LatLngBounds,s=e.route.coordinates,c=0;c<s.length;c++){var g=s[c],l=new google.maps.LatLng(g.latitude,g.longitude);r.push(l);var d=new google.maps.Marker({position:l,map:a,title:g.title});i.extend(d.position)}a.setCenter(i.getCenter()),a.fitBounds(i);for(var u=new google.maps.MVCArray,p=new google.maps.DirectionsService,h=new google.maps.Polyline({map:a,strokeColor:"#4986E7"}),c=0;c<r.length;c++)if(c+1<r.length){var m={origin:r[c],destination:r[c+1],travelMode:google.maps.DirectionsTravelMode.DRIVING};p.route(m,function(e,t){if(t==google.maps.DirectionsStatus.OK){var n=e.routes[0].overview_path;for(var r in n)h.getPath().push(n[r]);h.setMap(a),u.push(h)}o.hide()})}};r()}]);